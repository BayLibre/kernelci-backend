Kernel CI Backend
=================

Backend engine, Tornado powerd, for the Kernel CI reporting dashboard.

Requirements
============

Non exhaustive list of requirements is in the 'requirements.txt' file: those
need to be installed via pip.

For the rest of the necessary packages, see the ansible playbook.

Tests
=====

From the 'app/' folder, run:

  python -m unittest discover

Run the server
==============

From the 'app/' folder, run:

  python server.py


Run the Celery worker
---------------------

To run external tasks, Celery is used, and it is necessary to start it
manually for now:

  cd $DOWNLOAD?DIR/app
  celery worker --autoscale=10,0 --broker=redis://localhost --app=celeryqueue


Basic interactions
==================

GET
---

  curl localhost:8888/api/job
  curl localhost:8888/api/defconfig

  curl localhost:8888/api/job/$JOB_ID
  curl localhost:8888/api/defconfig/$DEFCONF_ID

  curl localhost:8888/api/job?limit=40
  curl localhost:8888/api/job?limit=40&skip=20

POST
----

This command will tell the application to parse the directory located at
'stable/v3.12.14' and import everything there.

  curl -X POST -H "Content-Type: application/json" -d '{"job": "stable", "kernel": "v3.12.14"}' localhost:8888/api/job
